# Netlify Deployment Guide

This document provides step-by-step instructions to deploy a website on Netlify using continuous deployment from a Git repository, manual deployment, or the Netlify CLI. It includes configuration details and best practices for a smooth deployment process.

## Prerequisites

Before you begin, ensure you have the following:

- A Netlify account. Sign up at https://app.netlify.com/signup if you don’t have one.
- A Git repository (e.g., on GitHub, GitLab, or Bitbucket) containing your website files (HTML, CSS, JavaScript, or a static site generated by frameworks like Astro, Gatsby, or Next.js).
- A code editor like Visual Studio Code.
- Git installed on your local machine. See GitHub Docs for setup instructions.
- (Optional) Netlify CLI installed for CLI-based deployment. Requires Node.js version 18.14.0 or later. Install with:
  ```
  npm install -g netlify-cli
  ```
- Verify installation with:
  ```
  netlify --version
  ```
  [Netlify CLI Get Started](https://docs.netlify.com/cli/get-started/)

---

## Method 1: Deploy Using Netlify UI with Continuous Deployment

This method connects your Git repository to Netlify for automatic deploys on every push to the specified branch.

1. **Log in to Netlify**

   Navigate to https://app.netlify.com and log in or sign up.

2. **Create a New Site**

   From the Netlify dashboard, go to your team’s Projects page.  
   Click **Add new project** and select **Import an existing project**.

3. **Connect to Git Provider**

   Choose your Git provider (GitHub, GitLab, Bitbucket, or Azure DevOps).  
   Authorize Netlify to access your Git provider by clicking the Authorize button. For GitHub, you may need to install the Netlify GitHub App and configure permissions for your repositories.

4. **Select Repository**

   Choose the repository containing your website files from the list provided by your Git provider.

5. **Configure Build Settings**

   - **Base Directory:** Specify the root folder of your project if it’s not in the repository root (e.g., `src/sxastarter` for a Next.js project in a monorepo). Leave blank if your site files are in the root.  
   - **Build Command:** Enter the command to build your site (e.g., `npm run build`, `gatsby build`, `hugo`, or `astro build` depending on your framework).  
   - **Publish Directory:** Specify the folder containing the deploy-ready files (e.g., `dist`, `public`, `build`). This is where Netlify looks for the output of your build process.  
   - **Environment Variables (optional):** Add any necessary variables (e.g., `HUGO_VERSION` for Hugo sites or `NODE_VERSION` for Node.js-based projects). Click **Add environment variables** to include them.  
   If Netlify detects a framework (e.g., Astro, Next.js), it may auto-populate these settings. Review and adjust as needed.

6. **Deploy Site**

   Click **Deploy site**. Netlify will build and deploy your site, uploading the contents of the publish directory to its CDN. You’ll receive a unique URL (e.g., `yoursite.netlify.app`).

7. **Customize Site Name (Optional)**

   After deployment, go to **Settings > General > Site details** in the Netlify dashboard.  
   Click **Change site name** to set a custom subdomain (e.g., `yourname.netlify.app`).

8. **Continuous Deployment**

   With continuous deployment enabled, every push to the selected branch (e.g., `main` or `master`) triggers an automatic build and deploy. Pull/merge requests generate Deploy Previews with unique URLs for testing.

---

## Method 2: Manual Deployment (Drag and Drop)

This method is suitable for projects not linked to a Git repository or for one-time deployments.

1. **Prepare Your Site Files**

   Ensure your site’s output files (e.g., `index.html`, CSS, JS) are in a single folder (e.g., `dist` or `public`). If using a static site generator, run the build command locally to generate these files (e.g., `npm run build`).

2. **Access Netlify Drop**

   Go to your team’s Projects page in the Netlify dashboard.  
   Select **Add new project > Deploy manually**.

3. **Upload Files**

   Drag and drop your site’s output folder (e.g., `dist`) into the deploy dropzone in the Netlify UI.  
   Netlify uploads the files to its CDN and provides a public URL.

4. **Limitations**

   Manual deployments do not support continuous deployment or Deploy Previews. To enable these, link your project to a Git repository.

---

## Method 3: Deploy Using Netlify CLI

The Netlify CLI offers more control and is ideal for developers who prefer terminal-based workflows.

1. **Install Netlify CLI**

   If not already installed, run:
   ```
   npm install -g netlify-cli
   ```
   Verify with:
   ```
   netlify --version
   ```

2. **Log in to Netlify**

   Run:
   ```
   netlify login
   ```
   This opens a browser window to authenticate and store an access token in `~/.netlify/config.json`.

3. **Initialize a New Site**

   Navigate to your project’s root directory:
   ```
   cd ~/path/to/your/project
   ```
   Run:
   ```
   netlify init
   ```
   The CLI guides you through:  
   - Connecting to an existing Git repository or creating a new one.  
   - Setting build command (e.g., `npm run build`) and publish directory (e.g., `dist`).  
   - Optionally linking to an existing Netlify site or creating a new one.

4. **Deploy the Site**

   For continuous deployment, push changes to your Git repository:
   ```
   git push
   ```
   Netlify automatically builds and deploys based on your settings.  
   For manual deployment without continuous deployment:
   ```
   netlify deploy --prod
   ```
   This uploads the contents of your publish directory (e.g., `dist`) to the production site.

5. **Preview Before Deploying**

   To preview a build without deploying:
   ```
   netlify deploy
   ```
   This creates a draft deploy with a preview URL.

---

## Optional Configurations

- **netlify.toml File:** For advanced control, create a `netlify.toml` file in your repository’s root (or subdirectory for monorepos) to define build settings. Example:
  ```toml
  [build]
    command = "npm run build"
    publish = "dist"
    base = "src/sxastarter"
  [build.environment]
    NODE_VERSION = "18"
  ```
  This file overrides UI settings and supports context-specific configurations.

- **Environment Variables:** Add variables in the Netlify UI under Project configuration > Build & deploy > Environment variables or in `netlify.toml`.

- **Custom Domain:** Assign a custom domain under Domain settings in the Netlify dashboard. Netlify provides a free TLS certificate for HTTPS.

- **Forms:** Enable form detection by adding `data-netlify="true"` to your HTML `<form>` tags. Configure in Forms > Usage and configuration.

- **Deploy Previews:** Automatically generated for pull/merge requests when using continuous deployment. Access via GitHub pull request comments or the Netlify dashboard.

- **Framework-Specific Settings:** For frameworks like Next.js, Astro, or Hugo, refer to Netlify’s framework-specific documentation for optimal build settings.

---

## Post-Deployment

- **Verify Deployment:** Check the live site at the provided Netlify URL (e.g., `yoursite.netlify.app`). Review the Deploys tab in the Netlify dashboard for build logs and status.

- **Manage Deploys:**
  - Roll back to a previous deploy via the Deploys tab.
  - Lock a deploy to prevent auto-publishing (Pro/Enterprise plans).
  - Cancel or retry deploys if needed.

- **Monitor Deploy Logs:** Access logs in the Deploys tab to troubleshoot issues. Copy logs or share specific lines using a URL.

- **Optimize CDN Usage:** Reduce deploy times by leveraging Netlify’s CDN cache. Check the deploy summary for uploaded file counts and optimize if excessive files are detected.

---

## Troubleshooting

- **Build Failures:** Check the deploy log in the Netlify dashboard for errors. Common issues include incorrect build commands, missing dependencies, or wrong publish directory.

- **404 Errors:** Ensure the publish directory contains an `index.html` file. For Next.js, verify the runtime is set to Next.js in Build settings.

- **Monorepo Issues:** Set the correct base and package directories in build settings or `netlify.toml`.

- **Support:** Visit the Netlify Community Forum or check Netlify Docs for help.

---

## Additional Resources

- [Netlify Docs](https://docs.netlify.com)  
- [Netlify CLI Reference](https://cli.netlify.com)  
- [Netlify Framework Guides](https://docs.netlify.com/frameworks/)  
- [Netlify Community Forum](https://community.netlify.com)

---

This guide covers the essential steps to deploy a site on Netlify. For advanced use cases, such as API deployments or serverless functions, refer to the Netlify API documentation or specific framework guides.
